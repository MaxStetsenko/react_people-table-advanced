(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{30:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n,s=c(18),a=c.n(s),r=c(6),l=c(3),i=c(0),o=function(){return Object(i.jsx)("header",{className:"header bg-dark",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("ul",{className:"header__navbar",children:[Object(i.jsx)("li",{children:Object(i.jsx)(r.c,{to:"/",className:"header__navbar-link",children:"Home"})}),Object(i.jsx)("li",{children:Object(i.jsx)(r.c,{to:"people",className:"header__navbar-link",children:"People"})})]})})})},j=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(o,{}),Object(i.jsx)("main",{className:"main",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)(l.a,{})})})]})},b=function(){return Object(i.jsx)("h1",{children:"Home Page"})},d=c(1),u=c.n(d),m=c(8),h=c(5),O=c(23),x=c(4),f=c.n(x),p=c(9),v=function(){var e=Object(p.a)(f.a.mark((function e(){var t,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 3:return c=e.sent,e.next=6,c.json();case 6:return t=e.sent,e.next=9,new Promise((function(e){setTimeout((function(){e(!0)}),500)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(O.a)(),t=e.register,c=e.formState.errors,n=e.handleSubmit,s=e.watch,a=Object(d.useState)([]),r=Object(h.a)(a,2),o=r[0],j=r[1],b=Object(d.useState)([]),u=Object(h.a)(b,2),x=u[0],f=u[1],p=Object(d.useState)([]),g=Object(h.a)(p,2),N=g[0],k=g[1],y=s(["born","name"]),w=Object(h.a)(y,2),S=w[0],F=w[1],C=Object(l.g)();Object(d.useEffect)((function(){v().then(j)}),[]);return Object(i.jsxs)("form",{autoComplete:"off",onSubmit:n((function(e){console.log(e),C("/people",{state:{status:"success",message:"Person '".concat(F,"' - added successfully")}})})),children:[Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"form-label",children:"Full name"}),Object(i.jsx)("input",Object(m.a)({className:"form-control",placeholder:"Max Stets"},t("name",{required:"This field is required",minLength:{value:4,message:"Min length 3"}}))),(null===c||void 0===c?void 0:c.name)&&Object(i.jsx)("p",{className:"mt-1 field-error",children:c.name.message})]}),Object(i.jsx)("label",{className:"form-label",children:"Sex:"}),Object(i.jsxs)("div",{className:"input-group",children:[Object(i.jsxs)("div",{className:"form-check form-check-inline",children:[Object(i.jsx)("input",Object(m.a)({className:"form-check-input",type:"radio",id:"sex-m"},t("sex",{required:!0}))),Object(i.jsx)("label",{className:"form-check-label",htmlFor:"sex-m",children:"male"})]}),Object(i.jsxs)("div",{className:"form-check form-check-inline",children:[Object(i.jsx)("input",Object(m.a)({className:"form-check-input",type:"radio",id:"sex-f"},t("sex",{required:!0}))),Object(i.jsx)("label",{className:"form-check-label",htmlFor:"sex-f",children:"female"})]})]}),Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)("label",{htmlFor:"born",className:"form-label",children:"Born"}),Object(i.jsx)("input",Object(m.a)({className:"form-control",placeholder:"1996",type:"number"},t("born",{required:"This field is required",onBlur:function(){return function(){if(S.length>3){var e=o.reduce((function(e,t){return"f"===t.sex&&t.died>=S?e[0].push(t):"m"===t.sex&&t.died>=S&&e[1].push(t),e}),[[],[]]);f(e[0]),k(e[1])}}()},min:{value:1400,message:"Minimum year - 1400"},max:{value:(new Date).getFullYear(),message:"Max year ".concat((new Date).getFullYear())}}))),(null===c||void 0===c?void 0:c.born)&&Object(i.jsx)("p",{className:"mt-1 field-error",children:c.born.message})]}),Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)("label",{htmlFor:"died",className:"form-label",children:"Died"}),Object(i.jsx)("input",Object(m.a)({className:"form-control",placeholder:"1996"},t("died",{required:"This field is required",disabled:(null===S||void 0===S?void 0:S.length)<4,min:{value:+S,message:"Died - born should be >= 0 and < 150"},max:{value:+S+150,message:"Died - born should be >= 0 and < 150"}}))),(null===c||void 0===c?void 0:c.died)&&Object(i.jsx)("p",{className:"mt-1 field-error",children:c.died.message})]}),Object(i.jsx)("label",{className:"form-label",children:"Mother name:"}),Object(i.jsxs)("select",Object(m.a)(Object(m.a)({className:"form-select mb-3"},t("motherName",{disabled:(null===S||void 0===S?void 0:S.length)<4})),{},{children:[Object(i.jsx)("option",{value:0,children:"--"}),x&&x.map((function(e){return Object(i.jsx)("option",{value:e.name,children:e.name},e.name)}))]})),Object(i.jsx)("label",{className:"form-label",children:"Father name:"}),Object(i.jsxs)("select",Object(m.a)(Object(m.a)({className:"form-select mb-3"},t("fatherName",{disabled:(null===S||void 0===S?void 0:S.length)<4})),{},{children:[Object(i.jsx)("option",{value:0,children:"--"}),N&&N.map((function(e){return Object(i.jsx)("option",{value:e.name,children:e.name},e.name)}))]})),Object(i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add new person"})]})},N=(c(30),function(){var e=Object(l.g)();return Object(i.jsx)("button",{className:"MoveBackBtn",type:"button",onClick:function(){return e(-1)},children:"Back"})}),k=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"d-flex mb-5",children:[Object(i.jsx)(N,{}),Object(i.jsx)("h1",{className:"ms-4",children:"Create People"})]}),Object(i.jsx)(g,{})]})},y=c(19),w=c.n(y),S=function(){return Object(i.jsx)(w.a,{type:"ThreeDots",color:"#212529",height:80,width:80})},F=c(20),C=c(21),B=c(15),q=c.n(B),P=u.a.memo((function(e){var t=e.handleFilter,c=e.thHeadTitles,n=e.sortOrder,s=e.sortBy,a=e.thHeadOffFilter,r=Object(d.useState)(""),l=Object(h.a)(r,2),o=l[0],j=l[1];return Object(i.jsx)("thead",{children:Object(i.jsx)("tr",{children:c.map((function(e){return Object(i.jsx)("th",{scope:"col",className:"table-th-head",children:a.includes(e)?Object(i.jsx)("span",{children:e}):Object(i.jsxs)("button",{type:"button",className:"table-button",onClick:function(){return c=e.toLowerCase(),t(c,n="desc"===o?"asc":"desc"),void j(n);var c,n},children:[Object(i.jsx)("span",{children:e}),Object(i.jsx)(F.a,{icon:C.a,className:q()("icon-sort",{"icon-sort--active":s===e.toLowerCase()&&"desc"===n})})]})},e)}))})})})),D=c(22),_=u.a.memo((function(e){var t=e.personName,c=e.slug,n=void 0===c?"":c,s=Object(l.f)().search;return Object(i.jsx)(D.a,{selector:"#".concat(n),scrollOptions:{block:"nearest",behavior:"auto"},children:Object(i.jsx)(r.b,{to:"".concat(n).concat(s),children:t})})})),M=u.a.memo((function(e){var t=e.person,c=Object(l.h)().slug;return Object(i.jsxs)("tr",{className:q()("tr",{"tr--f":"f"===t.sex&&t.slug===c,"tr--m":"m"===t.sex&&t.slug===c}),id:t.slug,children:[Object(i.jsx)("td",{children:t.name}),Object(i.jsx)("td",{children:t.sex}),Object(i.jsx)("td",{children:t.born}),Object(i.jsx)("td",{children:t.died}),Object(i.jsx)("td",{children:t.father?Object(i.jsx)(_,{slug:t.father.slug,personName:t.fatherName}):Object(i.jsx)("b",{children:t.fatherName||"---"})}),Object(i.jsx)("td",{children:t.mother?Object(i.jsx)(_,{slug:t.mother.slug,personName:t.motherName}):Object(i.jsx)("b",{children:t.mother||"---"})})]},t.name)}));!function(e){e.Name="name",e.Sex="sex",e.Died="died",e.Born="born"}(n||(n={}));var T=["Name","Sex","Born","Died","Father","Mother"],H=["Father","Mother"],L=u.a.memo((function(e){var t=e.peopleServer,c=Object(d.useState)(!1),s=Object(h.a)(c,2),a=s[0],o=s[1],j=Object(r.d)()||"",b=Object(h.a)(j,1)[0],u=b.get("query")||"",m=b.get("sortBy")||"",O=b.get("sortOrder")||"",x=Object(l.g)(),f=Object(l.f)().state;Object(d.useEffect)((function(){f&&(o(!0),new Promise((function(e){setTimeout((function(){return e(!1)}),5e3)})).then((function(e){o(e)})))}),[]);var p=t;if((null===u||void 0===u?void 0:u.length)&&(p=p.filter((function(e){var t,c,n=u.toLowerCase();return(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(c=e.fatherName)||void 0===c?void 0:c.toLowerCase().includes(n))}))),null===m||void 0===m?void 0:m.length)switch(m){case n.Name:case n.Sex:switch(O){case"asc":p.sort((function(e,t){return e[m].localeCompare(t[m])}));break;case"desc":p.sort((function(e,t){return t[m].localeCompare(e[m])}))}break;case n.Died:case n.Born:switch(O){case"asc":p.sort((function(e,t){return e[m]-t[m]}));break;case"desc":p.sort((function(e,t){return t[m]-e[m]}))}}var v=Object(d.useCallback)((function(e){var t=e.target.value;t.length>0?b.set("query",t):b.delete("query"),x("?".concat(b.toString()),{replace:!0})}),[]),g=Object(d.useCallback)((function(e,t){e.length>0?b.set("sortBy",e):b.delete("sortBy"),t.length>0?b.set("sortOrder",t):b.delete("sortOrder"),x("?".concat(b.toString()),{replace:!0})}),[u]);return Object(i.jsxs)(i.Fragment,{children:[a&&Object(i.jsx)("div",{className:"message bg-".concat(f.status),children:Object(i.jsx)("span",{children:f.message})}),Object(i.jsxs)("div",{className:"d-flex",children:[Object(i.jsx)("input",{type:"search",value:u,onChange:function(e){return v(e)},placeholder:"Search",className:"form-control"}),Object(i.jsx)(r.b,{to:"create",className:"btn btn-primary",children:"Create new person"})]}),Object(i.jsxs)("table",{className:"table",children:[Object(i.jsx)(P,{handleFilter:g,thHeadTitles:T,thHeadOffFilter:H,sortBy:m,sortOrder:O}),Object(i.jsx)("tbody",{children:p.length?p.map((function(e){return Object(i.jsx)(M,{person:e},e.slug)})):Object(i.jsx)("tr",{className:"text-center fs-4",children:Object(i.jsx)("td",{colSpan:T.length,children:"People not found"})})})]})]})})),E=function(){var e=Object(d.useState)([]),t=Object(h.a)(e,2),c=t[0],n=t[1],s=Object(d.useState)(!1),a=Object(h.a)(s,2),r=a[0],l=a[1];return Object(d.useEffect)((function(){l(!0),v().then((function(e){n(e.map((function(t){var c=e.find((function(e){return t.fatherName===e.name})),n=e.find((function(e){return t.motherName===e.name}));return Object(m.a)(Object(m.a)({},t),{},{father:c,mother:n})}))),l(!1)}))}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"People Page"}),r?Object(i.jsx)("div",{className:"spinner-wrapper",children:Object(i.jsx)(S,{})}):Object(i.jsx)(L,{peopleServer:c})]})},J=(c(54),function(){return Object(i.jsx)("div",{className:"app",children:Object(i.jsx)(l.d,{children:Object(i.jsxs)(l.b,{path:"/",element:Object(i.jsx)(j,{}),children:[Object(i.jsx)(l.b,{index:!0,element:Object(i.jsx)(b,{})}),Object(i.jsx)(l.b,{path:"people",element:Object(i.jsx)(E,{}),children:Object(i.jsx)(l.b,{path:":slug",element:Object(i.jsx)(E,{})})}),Object(i.jsx)(l.b,{path:"people/create",element:Object(i.jsx)(k,{})}),Object(i.jsx)(l.b,{path:"*",element:Object(i.jsx)("p",{children:"Page not found!!!"})})]})})})});a.a.render(Object(i.jsx)(r.a,{children:Object(i.jsx)(J,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.ad4e4052.chunk.js.map