(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n,r=c(19),s=c.n(r),a=c(6),l=c(3),o=c(0),i=function(){return Object(o.jsx)("header",{className:"header bg-dark",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("ul",{className:"header__navbar",children:[Object(o.jsx)("li",{children:Object(o.jsx)(a.c,{to:"/",className:"header__navbar-link",children:"Home"})}),Object(o.jsx)("li",{children:Object(o.jsx)(a.c,{to:"people",className:"header__navbar-link",children:"People"})})]})})})},j=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(i,{}),Object(o.jsx)("main",{className:"main",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(l.a,{})})})]})},b=c(1),d=c.n(b),u=c(9),m=c(5),h=c(16),O=c(4),x=c.n(O),f=c(8),p=function(){var e=Object(f.a)(x.a.mark((function e(){var t,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 3:return c=e.sent,e.next=6,c.json();case 6:return t=e.sent,e.next=9,new Promise((function(e){setTimeout((function(){e(!0)}),500)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),v=function(e){var t=e.titleLabel,c=e.startValue,n=void 0===c?"--":c,r=e.people,s=e.born,a=e.selectName,l=Object(h.a)().register;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{htmlFor:a,className:"form-label",children:t}),Object(o.jsxs)("select",Object(u.a)(Object(u.a)({className:"form-select mb-3"},l(a,{disabled:(null===s||void 0===s?void 0:s.length)<4})),{},{children:[Object(o.jsx)("option",{value:0,children:n}),r&&r.map((function(e){return Object(o.jsx)("option",{value:e.name,children:e.name},e.name)}))]}))]})},g=function(){var e=Object(h.a)(),t=e.register,c=e.formState.errors,n=e.handleSubmit,r=e.watch,s=Object(b.useState)([]),a=Object(m.a)(s,2),i=a[0],j=a[1],d=Object(b.useState)([]),O=Object(m.a)(d,2),x=O[0],f=O[1],g=Object(b.useState)([]),N=Object(m.a)(g,2),k=N[0],y=N[1],w=r(["born","name"]),F=Object(m.a)(w,2),S=F[0],C=F[1],B=Object(l.g)();Object(b.useEffect)((function(){p().then(j)}),[]);return Object(o.jsxs)("form",{autoComplete:"off",onSubmit:n((function(e){console.log(e),B("/people",{state:{status:"success",message:"Person '".concat(C,"' - added successfully")}})})),children:[Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"name",className:"form-label",children:"Full name"}),Object(o.jsx)("input",Object(u.a)({className:"form-control",placeholder:"Max Stets"},t("name",{required:"This field is required",minLength:{value:4,message:"Min length 3"}}))),(null===c||void 0===c?void 0:c.name)&&Object(o.jsx)("p",{className:"mt-1 field-error",children:c.name.message})]}),Object(o.jsx)("label",{className:"form-label",children:"Sex:"}),Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsxs)("div",{className:"form-check form-check-inline",children:[Object(o.jsx)("input",Object(u.a)({className:"form-check-input",type:"radio",id:"sex-m"},t("sex",{required:!0}))),Object(o.jsx)("label",{className:"form-check-label",htmlFor:"sex-m",children:"male"})]}),Object(o.jsxs)("div",{className:"form-check form-check-inline",children:[Object(o.jsx)("input",Object(u.a)({className:"form-check-input",type:"radio",id:"sex-f"},t("sex",{required:!0}))),Object(o.jsx)("label",{className:"form-check-label",htmlFor:"sex-f",children:"female"})]})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"born",className:"form-label",children:"Born"}),Object(o.jsx)("input",Object(u.a)({className:"form-control",placeholder:"1996",type:"number"},t("born",{required:"This field is required",onBlur:function(){return function(){if(S.length>3){var e=i.reduce((function(e,t){return"f"===t.sex&&t.died>=S?e[0].push(t):"m"===t.sex&&t.died>=S&&e[1].push(t),e}),[[],[]]);f(e[0]),y(e[1])}}()},min:{value:1400,message:"Minimum year - 1400"},max:{value:(new Date).getFullYear(),message:"Max year ".concat((new Date).getFullYear())}}))),(null===c||void 0===c?void 0:c.born)&&Object(o.jsx)("p",{className:"mt-1 field-error",children:c.born.message})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"died",className:"form-label",children:"Died"}),Object(o.jsx)("input",Object(u.a)({className:"form-control",placeholder:"1996"},t("died",{required:"This field is required",disabled:(null===S||void 0===S?void 0:S.length)<4,min:{value:+S,message:"Died - born should be >= 0 and < 150"},max:{value:+S+150,message:"Died - born should be >= 0 and < 150"}}))),(null===c||void 0===c?void 0:c.died)&&Object(o.jsx)("p",{className:"mt-1 field-error",children:c.died.message})]}),Object(o.jsx)(v,{titleLabel:"Mother name:",people:x,born:S,selectName:"MotherName"}),Object(o.jsx)(v,{titleLabel:"Father name:",people:k,born:S,selectName:"FatherName"}),Object(o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add new person"})]})},N=(c(30),function(){var e=Object(l.g)();return Object(o.jsx)("button",{className:"MoveBackBtn",type:"button",onClick:function(){return e(-1)},children:"Back"})}),k=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"d-flex mb-5",children:[Object(o.jsx)(N,{}),Object(o.jsx)("h1",{className:"ms-4",children:"Create People"})]}),Object(o.jsx)(g,{})]})},y=(c(31),c(20)),w=c.n(y),F=function(){return Object(o.jsx)(w.a,{type:"ThreeDots",color:"#212529",height:80,width:80})},S=c(21),C=c(22),B=c(15),q=c.n(B),L=d.a.memo((function(e){var t=e.handleFilter,c=e.thHeadTitles,n=e.sortOrder,r=e.sortBy,s=e.thHeadOffFilter,a=Object(b.useState)(""),l=Object(m.a)(a,2),i=l[0],j=l[1];return Object(o.jsx)("thead",{children:Object(o.jsx)("tr",{children:c.map((function(e){return Object(o.jsx)("th",{scope:"col",className:"table-th-head",children:s.includes(e)?Object(o.jsx)("span",{children:e}):Object(o.jsxs)("button",{type:"button",className:"table-button",onClick:function(){return c=e.toLowerCase(),t(c,n="desc"===i?"asc":"desc"),void j(n);var c,n},children:[Object(o.jsx)("span",{children:e}),Object(o.jsx)(S.a,{icon:C.a,className:q()("icon-sort",{"icon-sort--active":r===e.toLowerCase()&&"desc"===n})})]})},e)}))})})})),P=c(23),D=d.a.memo((function(e){var t=e.personName,c=e.slug,n=void 0===c?"":c,r=Object(l.f)().search;return Object(o.jsx)(P.a,{selector:"#".concat(n),scrollOptions:{block:"nearest",behavior:"auto"},children:Object(o.jsx)(a.b,{to:"".concat(n).concat(r),children:t})})})),M=d.a.memo((function(e){var t=e.person,c=Object(l.h)().slug;return Object(o.jsxs)("tr",{className:q()("tr",{"tr--f":"f"===t.sex&&t.slug===c,"tr--m":"m"===t.sex&&t.slug===c}),id:t.slug,children:[Object(o.jsx)("td",{children:t.name}),Object(o.jsx)("td",{children:t.sex}),Object(o.jsx)("td",{children:t.born}),Object(o.jsx)("td",{children:t.died}),Object(o.jsx)("td",{children:t.father?Object(o.jsx)(D,{slug:t.father.slug,personName:t.fatherName}):Object(o.jsx)("b",{children:t.fatherName||"---"})}),Object(o.jsx)("td",{children:t.mother?Object(o.jsx)(D,{slug:t.mother.slug,personName:t.motherName}):Object(o.jsx)("b",{children:t.mother||"---"})})]},t.name)}));!function(e){e.Name="name",e.Sex="sex",e.Died="died",e.Born="born"}(n||(n={}));var _=["Name","Sex","Born","Died","Father","Mother"],T=["Father","Mother"],H=d.a.memo((function(e){var t=e.peopleServer,c=Object(b.useState)(!1),r=Object(m.a)(c,2),s=r[0],i=r[1],j=Object(a.d)()||"",d=Object(m.a)(j,1)[0],u=d.get("query")||"",h=d.get("sortBy")||"",O=d.get("sortOrder")||"",x=Object(l.g)(),f=Object(l.f)().state;Object(b.useEffect)((function(){f&&(i(!0),new Promise((function(e){setTimeout((function(){return e(!1)}),5e3)})).then((function(e){i(e)})))}),[]);var p=t;(null===u||void 0===u?void 0:u.length)&&(p=p.filter((function(e){var t,c,n,r=u.toLowerCase();return(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(c=e.fatherName)||void 0===c?void 0:c.toLowerCase().includes(r))||(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(r))}))),(null===h||void 0===h?void 0:h.length)&&function(){switch(h){case n.Name:case n.Sex:switch(O){case"asc":p.sort((function(e,t){return e[h].localeCompare(t[h])}));break;case"desc":p.sort((function(e,t){return t[h].localeCompare(e[h])}))}break;case n.Died:case n.Born:switch(O){case"asc":p.sort((function(e,t){return e[h]-t[h]}));break;case"desc":p.sort((function(e,t){return t[h]-e[h]}))}}}();var v=Object(b.useCallback)((function(e){var t=e.target.value;t.length>0?d.set("query",t):d.delete("query"),x("?".concat(d.toString()),{replace:!0})}),[]),g=Object(b.useCallback)((function(e,t){e.length>0?d.set("sortBy",e):d.delete("sortBy"),t.length>0?d.set("sortOrder",t):d.delete("sortOrder"),x("?".concat(d.toString()),{replace:!0})}),[u]);return Object(o.jsxs)(o.Fragment,{children:[s&&Object(o.jsx)("div",{className:"message bg-".concat(f.status),children:Object(o.jsx)("span",{children:f.message})}),Object(o.jsxs)("div",{className:"d-flex",children:[Object(o.jsx)("input",{type:"search",value:u,onChange:function(e){return v(e)},placeholder:"Search",className:"form-control"}),Object(o.jsx)(a.b,{to:"create",className:"btn btn-primary ms-5",children:"Create new person"})]}),Object(o.jsxs)("table",{className:"table",children:[Object(o.jsx)(L,{handleFilter:g,thHeadTitles:_,thHeadOffFilter:T,sortBy:h,sortOrder:O}),Object(o.jsx)("tbody",{children:p.length?p.map((function(e){return Object(o.jsx)(M,{person:e},e.slug)})):Object(o.jsx)("tr",{className:"text-center fs-4",children:Object(o.jsx)("td",{colSpan:_.length,children:"People not found"})})})]})]})})),E=function(){var e=Object(b.useState)([]),t=Object(m.a)(e,2),c=t[0],n=t[1],r=Object(b.useState)(!1),s=Object(m.a)(r,2),a=s[0],l=s[1];return Object(b.useEffect)((function(){l(!0),p().then((function(e){n(e.map((function(t){var c=e.find((function(e){return t.fatherName===e.name})),n=e.find((function(e){return t.motherName===e.name}));return Object(u.a)(Object(u.a)({},t),{},{father:c,mother:n})}))),l(!1)}))}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:"People Page"}),a?Object(o.jsx)("div",{className:"spinner-wrapper",children:Object(o.jsx)(F,{})}):Object(o.jsx)(H,{peopleServer:c})]})},J=function(){return Object(o.jsx)("h1",{children:"Home Page"})},Y=function(){return Object(o.jsx)("div",{className:"app",children:Object(o.jsx)(l.d,{children:Object(o.jsxs)(l.b,{path:"/",element:Object(o.jsx)(j,{}),children:[Object(o.jsx)(l.b,{index:!0,element:Object(o.jsx)(J,{})}),Object(o.jsx)(l.b,{path:"people",element:Object(o.jsx)(E,{}),children:Object(o.jsx)(l.b,{path:":slug",element:Object(o.jsx)(E,{})})}),Object(o.jsx)(l.b,{path:"people/create",element:Object(o.jsx)(k,{})}),Object(o.jsx)(l.b,{path:"*",element:Object(o.jsx)("p",{children:"Page not found!!!"})})]})})})};s.a.render(Object(o.jsx)(a.a,{children:Object(o.jsx)(Y,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.60b3693d.chunk.js.map